{"ast":null,"code":"import axios from \"axios\";\nexport const postModule = {\n  state: () => ({\n    posts: [],\n    isPostsLoading: false,\n    selectedSort: '',\n    searchQuery: '',\n    page: 1,\n    limit: 10,\n    totalPages: 0,\n    sortOptions: [{\n      value: 'title',\n      name: 'По названию'\n    }, {\n      value: 'body',\n      name: 'По содержимому'\n    }]\n  }),\n  getters: {\n    sortedPosts(state) {\n      return [...state.posts].sort((post1, post2) => post1[state.selectedSort]?.localeCompare(post2[state.selectedSort]));\n    },\n    sortedAndSearchedPosts(state, getters) {\n      return getters.sortedPosts.filter(post => post.title.toLowerCase().includes(state.searchQuery.toLowerCase()));\n    }\n  },\n  mutations: {\n    setPosts(state, posts) {\n      state.posts = posts;\n    },\n    setLoading(state, bool) {\n      state.isPostsLoading = bool;\n    },\n    setPage(state, page) {\n      state.page = page;\n    },\n    setSelectedSort(state, selectedSort) {\n      state.selectedSort = selectedSort;\n    },\n    setTotalPages(state, totalPages) {\n      state.totalPages = totalPages;\n    },\n    setSearchQuery(state, searchQuery) {\n      state.searchQuery = searchQuery;\n    }\n  },\n  actions: {\n    async fetchPosts({\n      state,\n      commit\n    }) {\n      try {\n        commit('setLoading', true);\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: state.page,\n            _limit: state.limit\n          }\n        });\n        commit('setTotalPages', Math.ceil(response.headers['x-total-count'] / state.limit));\n        commit('setPosts', response.data);\n      } catch (e) {\n        console.log(e);\n        // alert('Ошибка!');\n      } finally {\n        commit('setLoading', false);\n      }\n    },\n    async loadMorePosts({\n      state,\n      commit\n    }) {\n      try {\n        commit('setPage', state.page + 1);\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: state.page,\n            _limit: state.limit\n          }\n        });\n        commit('setTotalPages', Math.ceil(response.headers['x-total-count'] / this.limit));\n        commit('setPosts', [...state.posts, ...response.data]);\n      } catch (e) {\n        console.log(e);\n        // alert('Ошибка!');\n      }\n    }\n  },\n\n  namespaced: true\n};","map":{"version":3,"names":["axios","postModule","state","posts","isPostsLoading","selectedSort","searchQuery","page","limit","totalPages","sortOptions","value","name","getters","sortedPosts","sort","post1","post2","localeCompare","sortedAndSearchedPosts","filter","post","title","toLowerCase","includes","mutations","setPosts","setLoading","bool","setPage","setSelectedSort","setTotalPages","setSearchQuery","actions","fetchPosts","commit","response","get","params","_page","_limit","Math","ceil","headers","data","e","console","log","loadMorePosts","namespaced"],"sources":["C:/Users/ivank/Desktop/vue-project/src/store/postModule.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const postModule = {\r\n    state: () => ({\r\n        posts: [],\r\n        isPostsLoading: false,\r\n        selectedSort: '',\r\n        searchQuery: '',\r\n        page: 1,\r\n        limit: 10,\r\n        totalPages: 0,\r\n        sortOptions: [\r\n            {value: 'title', name: 'По названию'},\r\n            {value: 'body', name: 'По содержимому'},\r\n        ]\r\n    }),\r\n    getters: {\r\n        sortedPosts(state) {\r\n            return [...state.posts].sort((post1, post2) => post1[state.selectedSort]?.localeCompare(post2[state.selectedSort]))\r\n        },\r\n\r\n        sortedAndSearchedPosts(state, getters) {\r\n            return getters.sortedPosts.filter(post => post.title.toLowerCase().includes(state.searchQuery.toLowerCase()))\r\n        }\r\n    },\r\n    mutations: {\r\n        setPosts(state, posts) {\r\n            state.posts = posts;\r\n        },\r\n        setLoading(state, bool) {\r\n            state.isPostsLoading = bool\r\n        },\r\n        setPage (state, page) {\r\n            state.page = page\r\n        },\r\n        setSelectedSort(state, selectedSort) {\r\n            state.selectedSort = selectedSort\r\n        },\r\n        setTotalPages(state, totalPages) {\r\n            state.totalPages = totalPages\r\n        },\r\n        setSearchQuery(state, searchQuery) {\r\n            state.searchQuery = searchQuery\r\n        },\r\n    },\r\n    actions: {\r\n        async fetchPosts({state, commit}) {\r\n            try {\r\n                commit('setLoading', true);\r\n                const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n                    params: {\r\n                        _page: state.page,\r\n                        _limit: state.limit\r\n                    }\r\n                });\r\n                commit('setTotalPages', Math.ceil(response.headers['x-total-count'] / state.limit))\r\n                commit('setPosts', response.data)\r\n            } catch (e) {\r\n                console.log(e)\r\n                // alert('Ошибка!');\r\n            } finally {\r\n                commit('setLoading', false);\r\n            }\r\n        },\r\n\r\n        async loadMorePosts({state, commit}) {\r\n            try {\r\n                commit('setPage', state.page+1)\r\n                const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n                    params: {\r\n                        _page: state.page,\r\n                        _limit: state.limit\r\n                    }\r\n                });\r\n                commit('setTotalPages', Math.ceil(response.headers['x-total-count'] / this.limit))\r\n                commit('setPosts', [...state.posts, ...response.data]);\r\n            } catch (e) {\r\n                console.log(e)\r\n                // alert('Ошибка!');\r\n            }\r\n        }\r\n    },\r\n    namespaced: true\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}